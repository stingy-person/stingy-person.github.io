<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>铁公鸡</title>
  
  <subtitle>业精于勤荒于嬉</subtitle>
  <link href="https://stingy-person.github.io/atom.xml" rel="self"/>
  
  <link href="https://stingy-person.github.io/"/>
  <updated>2022-06-21T16:40:08.539Z</updated>
  <id>https://stingy-person.github.io/</id>
  
  <author>
    <name>铁公鸡</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JAVA学习材料</title>
    <link href="https://stingy-person.github.io/2022/06/19/back-end/JAVA/learning_materials/learning_materials/"/>
    <id>https://stingy-person.github.io/2022/06/19/back-end/JAVA/learning_materials/learning_materials/</id>
    <published>2022-06-19T15:35:40.690Z</published>
    <updated>2022-06-21T16:40:08.539Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.aliyundrive.com/s/khC92HtYoDN">算法第四版</a><br /><a href="https://www.aliyundrive.com/s/zZwUEQce6v1">labuladong的刷题笔记V2.4</a><br /><a href="https://www.aliyundrive.com/s/KDfC47ywSEf">labuladong的算法秘籍V2.4</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.aliyundrive.com/s/khC92HtYoDN&quot;&gt;算法第四版&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.aliyundrive.com/s/zZwUEQce6v1&quot;&gt;labuladong的刷题笔记V2</summary>
      
    
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/categories/JAVA/"/>
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/tags/JAVA/"/>
    
  </entry>
  
  <entry>
    <title>Vue+Electron+Element搭建桌面应用开发</title>
    <link href="https://stingy-person.github.io/2022/06/13/front-end/desktop_application_construction/desktop_application_construction/"/>
    <id>https://stingy-person.github.io/2022/06/13/front-end/desktop_application_construction/desktop_application_construction/</id>
    <published>2022-06-12T22:43:43.328Z</published>
    <updated>2022-06-19T15:17:06.306Z</updated>
    
    <content type="html"><![CDATA[<h1 id="资料来源"><a class="markdownIt-Anchor" href="#资料来源"></a> 资料来源</h1><p><a href="https://blog.csdn.net/DDDHL_/article/details/124483585">https://blog.csdn.net/DDDHL_/article/details/124483585</a></p><h1 id="1创建vue工程"><a class="markdownIt-Anchor" href="#1创建vue工程"></a> 1.创建Vue工程</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 选择vue3</span></span><br><span class="line">vue create front-end</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试命令</span></span><br><span class="line">cd front-end</span><br><span class="line">npm run serve</span><br><span class="line"><span class="meta">#</span><span class="bash"> 本地可打开界面</span></span><br></pre></td></tr></table></figure><h1 id="2-安装router"><a class="markdownIt-Anchor" href="#2-安装router"></a> 2. 安装router</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -i vue-router@4</span><br></pre></td></tr></table></figure><h2 id="21创建路由文件"><a class="markdownIt-Anchor" href="#21创建路由文件"></a> 2.1创建路由文件</h2><p>在项目的 src 目录下创建 router/index.js 。内容如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/components/HelloWorld&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  history: createWebHashHistory(),</span><br><span class="line">  routes: routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><h2 id="22mainjs-注册"><a class="markdownIt-Anchor" href="#22mainjs-注册"></a> 2.2main.js 注册</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="23appvue"><a class="markdownIt-Anchor" href="#23appvue"></a> 2.3App.vue</h2><p>在 App.vue 中加入 <router-view /> 就可以测试是否安装成功啦 （把原本组件的代码删掉）<br /><img src="source/_posts/front-end/desktop_application_construction/img_1.png" alt="img_1.png" /></p><h1 id="3安装-vuex按需安装"><a class="markdownIt-Anchor" href="#3安装-vuex按需安装"></a> 3.安装 Vuex（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex -s</span><br></pre></td></tr></table></figure><h2 id="31创建store文件"><a class="markdownIt-Anchor" href="#31创建store文件"></a> 3.1创建store文件</h2><p>在项目的 src 目录下创建 store/index.js 。内容如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    test: <span class="string">&#x27;测试一下哈哈哈&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="32mainjs-注册"><a class="markdownIt-Anchor" href="#32mainjs-注册"></a> 3.2main.js 注册</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line">createApp(App).use(store).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="33测试"><a class="markdownIt-Anchor" href="#33测试"></a> 3.3测试</h2><p>HelloWorld.vue 。控制台有输出就可以了</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    <span class="keyword">const</span> store = useStore()</span><br><span class="line">    <span class="built_in">console</span>.log(store.state.test)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="4安装-sass按需安装"><a class="markdownIt-Anchor" href="#4安装-sass按需安装"></a> 4.安装 Sass（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i node-sass sass-loader style-loader -d</span><br></pre></td></tr></table></figure><h2 id="41测试"><a class="markdownIt-Anchor" href="#41测试"></a> 4.1测试</h2><blockquote><p>组件中 <style lang="scss" scoped> 不报错即可</p></blockquote><h1 id="5element-plus按需安装"><a class="markdownIt-Anchor" href="#5element-plus按需安装"></a> 5.element-Plus（按需安装）</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus --save</span><br><span class="line">npm install -D unplugin-vue-components unplugin-auto-import</span><br></pre></td></tr></table></figure><p>在项目的 webpack.config.js 添加代码。完整示例如下：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> AutoImport = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-auto-import/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Components = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; ElementPlusResolver &#125; = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = defineConfig(&#123;</span><br><span class="line">  transpileDependencies: <span class="literal">true</span>,</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      AutoImport(&#123;</span><br><span class="line">        resolvers: [ElementPlusResolver()],</span><br><span class="line">      &#125;),</span><br><span class="line">      Components(&#123;</span><br><span class="line">        resolvers: [ElementPlusResolver()],</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="6安装-electron"><a class="markdownIt-Anchor" href="#6安装-electron"></a> 6.安装 Electron</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 版本选择13.0</span></span><br><span class="line">vue add electron-builder</span><br><span class="line">npm run electron:serve</span><br></pre></td></tr></table></figure><p><img src="source/_posts/front-end/desktop_application_construction/img.png" alt="img.png" /></p><h1 id="faq"><a class="markdownIt-Anchor" href="#faq"></a> FAQ</h1><h2 id="1启动慢"><a class="markdownIt-Anchor" href="#1启动慢"></a> 1.启动慢</h2><p>问题截图：<br /><img src="source/_posts/front-end/desktop_application_construction/img_2.png" alt="img_2.png" /></p><p>问题解决方法：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-devtools-installer</span><br></pre></td></tr></table></figure><p>background.js(注释掉红框代码)<br /><img src="source/_posts/front-end/desktop_application_construction/img_5.png" alt="img_5.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;资料来源&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#资料来源&quot;&gt;&lt;/a&gt; 资料来源&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/DDDHL_/article/details/124483585&quot;&gt;h</summary>
      
    
    
    
    <category term="前端" scheme="https://stingy-person.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://stingy-person.github.io/tags/Vue/"/>
    
    <category term="Electron" scheme="https://stingy-person.github.io/tags/Electron/"/>
    
    <category term="Element" scheme="https://stingy-person.github.io/tags/Element/"/>
    
  </entry>
  
  <entry>
    <title>JDK下载</title>
    <link href="https://stingy-person.github.io/2022/05/16/back-end/JAVA/jdk_download/jdk_download/"/>
    <id>https://stingy-person.github.io/2022/05/16/back-end/JAVA/jdk_download/jdk_download/</id>
    <published>2022-05-16T15:22:27.995Z</published>
    <updated>2022-05-16T15:34:31.036Z</updated>
    
    <content type="html"><![CDATA[<ul><li>华为(毕昇)<br /><a href="https://mirrors.huaweicloud.com/java/jdk/">https://mirrors.huaweicloud.com/java/jdk/</a></li><li>Oracle<br /><a href="https://www.oracle.com/java/technologies/downloads">https://www.oracle.com/java/technologies/downloads</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;华为(毕昇)&lt;br /&gt;
&lt;a href=&quot;https://mirrors.huaweicloud.com/java/jdk/&quot;&gt;https://mirrors.huaweicloud.com/java/jdk/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Oracle&lt;br /</summary>
      
    
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/categories/JAVA/"/>
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/tags/JAVA/"/>
    
    <category term="JDK" scheme="https://stingy-person.github.io/tags/JDK/"/>
    
  </entry>
  
  <entry>
    <title>配置格式化模板</title>
    <link href="https://stingy-person.github.io/2022/05/15/back-end/JAVA/code_format/code_format/"/>
    <id>https://stingy-person.github.io/2022/05/15/back-end/JAVA/code_format/code_format/</id>
    <published>2022-05-15T14:33:57.853Z</published>
    <updated>2022-06-19T15:14:41.944Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-下载格式化模板文件"><a class="markdownIt-Anchor" href="#1-下载格式化模板文件"></a> 1. 下载格式化模板文件</h1><p>下载地址：<a href="https://github.com/alibaba/p3c/tree/master/p3c-formatter">https://github.com/alibaba/p3c/tree/master/p3c-formatter</a></p><ul><li><a href="source/_posts/back-end/JAVA/code_format/appendix/eclipse-codestyle.xml">eclipse-codestyle.xml</a></li><li><a href="source/_posts/back-end/JAVA/code_format/appendix/eclipse-codetemplate.xml">eclipse-codetemplate.xml</a></li></ul><h1 id="2-安装插件"><a class="markdownIt-Anchor" href="#2-安装插件"></a> 2. 安装插件</h1><ul><li>Adapter for Eclipse Code Formatter<br /><img src="source/_posts/back-end/JAVA/code_format/plugin01.png" alt="plugin01.png" /></li><li>Alibaba Java Coding Guidelines<br /><img src="source/_posts/back-end/JAVA/code_format/plugin02.png" alt="plugin02.png" /></li></ul><h1 id="3-配置"><a class="markdownIt-Anchor" href="#3-配置"></a> 3. 配置</h1><h2 id="31-配置格式化模板"><a class="markdownIt-Anchor" href="#31-配置格式化模板"></a> 3.1 配置格式化模板</h2><p>选择下载的eclipse-codestyle.xml配置文件<br /><img src="source/_posts/back-end/JAVA/code_format/config01.png" alt="config01.png" /></p><h2 id="32-代码注释模板配置"><a class="markdownIt-Anchor" href="#32-代码注释模板配置"></a> 3.2 代码注释模板配置</h2><h3 id="321-类"><a class="markdownIt-Anchor" href="#321-类"></a> 3.2.1 类</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="source/_posts/back-end/JAVA/code_format/config02.png" alt="config02.png" /></p><h3 id="322-接口"><a class="markdownIt-Anchor" href="#322-接口"></a> 3.2.2 接口</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="source/_posts/back-end/JAVA/code_format/config03.png" alt="config03.png" /></p><h3 id="323-枚举"><a class="markdownIt-Anchor" href="#323-枚举"></a> 3.2.3 枚举</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="source/_posts/back-end/JAVA/code_format/config04.png" alt="config04.png" /></p><h3 id="324-注解"><a class="markdownIt-Anchor" href="#324-注解"></a> 3.2.4 注解</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  * </span><br><span class="line">  *</span><br><span class="line">  * <span class="variable">@author</span> <span class="variable">$&#123;</span>USER&#125; </span><br><span class="line">  * <span class="variable">@date</span> <span class="variable">$&#123;</span>YEAR&#125;-<span class="variable">$&#123;</span>MONTH&#125;-<span class="variable">$&#123;</span>DAY&#125;</span><br><span class="line">  *<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="source/_posts/back-end/JAVA/code_format/config05.png" alt="config05.png" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-下载格式化模板文件&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-下载格式化模板文件&quot;&gt;&lt;/a&gt; 1. 下载格式化模板文件&lt;/h1&gt;
&lt;p&gt;下载地址：&lt;a href=&quot;https://github.com/alibaba/p3c</summary>
      
    
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/categories/JAVA/"/>
    
    
    <category term="JAVA" scheme="https://stingy-person.github.io/tags/JAVA/"/>
    
    <category term="Format" scheme="https://stingy-person.github.io/tags/Format/"/>
    
  </entry>
  
  <entry>
    <title>FFmpeg使用</title>
    <link href="https://stingy-person.github.io/2022/01/17/back-end/Ffmpeg/ffmpeg_install/"/>
    <id>https://stingy-person.github.io/2022/01/17/back-end/Ffmpeg/ffmpeg_install/</id>
    <published>2022-01-17T11:28:45.677Z</published>
    <updated>2022-06-05T04:05:13.608Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1下载安装"><a class="markdownIt-Anchor" href="#1下载安装"></a> 1.下载安装</h1><blockquote><p><a href="https://github.com/BtbN/FFmpeg-Builds/releases">https://github.com/BtbN/FFmpeg-Builds/releases</a><br />文件名：ffmpeg-master-latest-win64-lgpl-shared.zip</p></blockquote><h1 id="2常用命令"><a class="markdownIt-Anchor" href="#2常用命令"></a> 2.常用命令</h1><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载m3u8文件保存为mp4</span></span><br><span class="line">ffmpeg -i xxxx -c <span class="keyword">copy</span><span class="bash"> xxx.mp4</span></span><br><span class="line"><span class="comment"># dos窗口&amp;转义后为：^&amp;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1下载安装&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1下载安装&quot;&gt;&lt;/a&gt; 1.下载安装&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/BtbN/FFmpeg-Builds/re</summary>
      
    
    
    
    <category term="视频流" scheme="https://stingy-person.github.io/categories/%E8%A7%86%E9%A2%91%E6%B5%81/"/>
    
    
    <category term="FFmpeg" scheme="https://stingy-person.github.io/tags/FFmpeg/"/>
    
  </entry>
  
  <entry>
    <title>dosgame部署</title>
    <link href="https://stingy-person.github.io/2022/01/09/containerized/Docker/docker_dosgame/"/>
    <id>https://stingy-person.github.io/2022/01/09/containerized/Docker/docker_dosgame/</id>
    <published>2022-01-09T05:11:18.961Z</published>
    <updated>2022-01-09T07:38:34.288Z</updated>
    
    <content type="html"><![CDATA[<h1 id="部署背景"><a class="markdownIt-Anchor" href="#部署背景"></a> 部署背景</h1><blockquote><p>打游戏</p></blockquote><h1 id="资料地址"><a class="markdownIt-Anchor" href="#资料地址"></a> 资料地址</h1><p><a href="https://hub.docker.com/r/oldiy/dosgame-web-docker">https://hub.docker.com/r/oldiy/dosgame-web-docker</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;部署背景&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#部署背景&quot;&gt;&lt;/a&gt; 部署背景&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;打游戏&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;资料地址&quot;&gt;&lt;a class=&quot;markdow</summary>
      
    
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Python Rest请求</title>
    <link href="https://stingy-person.github.io/2022/01/01/back-end/Python/urllib3_request_call/"/>
    <id>https://stingy-person.github.io/2022/01/01/back-end/Python/urllib3_request_call/</id>
    <published>2022-01-01T02:19:17.892Z</published>
    <updated>2022-05-15T13:31:05.084Z</updated>
    
    <content type="html"><![CDATA[<h1 id="https忽略证书访问"><a class="markdownIt-Anchor" href="#https忽略证书访问"></a> https忽略证书访问</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _*_ coding:UTF-8 _*_</span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    https = urllib3.HTTPSConnectionPool(<span class="string">&#x27;www.baidu.com&#x27;</span>, port=<span class="number">443</span>, cert_reqs=<span class="string">&#x27;CERT_NONE&#x27;</span>,</span><br><span class="line">                                       assert_hostname=<span class="literal">False</span>)</span><br><span class="line">    req = https.request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    res = req.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;%s&quot;</span> %(res))</span><br></pre></td></tr></table></figure><h1 id="http请求访问"><a class="markdownIt-Anchor" href="#http请求访问"></a> http请求访问</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _*_ coding:UTF-8 _*_</span></span><br><span class="line"><span class="keyword">import</span> urllib3</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    http = urllib3.HTTPConnectionPool(<span class="string">&#x27;www.baidu.com&#x27;</span>, port=<span class="number">80</span>)</span><br><span class="line">    req = http.request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&quot;/&quot;</span>)</span><br><span class="line">    res = req.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;%s&quot;</span> %(res))</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;https忽略证书访问&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#https忽略证书访问&quot;&gt;&lt;/a&gt; https忽略证书访问&lt;/h1&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td </summary>
      
    
    
    
    <category term="Python" scheme="https://stingy-person.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://stingy-person.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Python编译安装</title>
    <link href="https://stingy-person.github.io/2022/01/01/back-end/Python/python_install/"/>
    <id>https://stingy-person.github.io/2022/01/01/back-end/Python/python_install/</id>
    <published>2022-01-01T02:19:17.883Z</published>
    <updated>2022-01-03T01:31:33.862Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装python3"><a class="markdownIt-Anchor" href="#安装python3"></a> 安装Python3</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 安装python3</span></span><br><span class="line">yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libffi-devel libuuid-devel python-devel mysql-devel gcc gcc-c++ make which</span><br><span class="line">wget https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/3.7.6/</span>Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">tar -zxvf Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">rm -rf Python-<span class="number">3.7</span>.<span class="number">6</span>.tgz</span><br><span class="line">cd Python-<span class="number">3.7</span>.<span class="number">6</span>/</span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>opt/python3</span><br><span class="line">make </span><br><span class="line">make install</span><br><span class="line">mv <span class="regexp">/usr/</span>bin<span class="regexp">/python /u</span>sr<span class="regexp">/bin/</span>python_bak</span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>python3 <span class="regexp">/usr/</span>bin/python</span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>pip3 <span class="regexp">/usr/</span>bin/pip</span><br><span class="line">python -V</span><br></pre></td></tr></table></figure><h1 id="python源配置"><a class="markdownIt-Anchor" href="#python源配置"></a> Python源配置</h1><ul><li>配置文件路径</li></ul><blockquote><p>C:\Users\Administrator.LAPTOP-DV6H7GK0\AppData\Roaming\pip\pip.ini</p></blockquote><ul><li>源配置</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ~/.pip</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="keyword">index</span>-url = https://repo.huaweicloud.com/repository/pypi/simple</span><br><span class="line">extra-<span class="keyword">index</span>-url = https://mirrors.aliyun.com/pypi/simple</span><br><span class="line">                  https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line"><span class="keyword">trusted</span>-host = repo.huaweicloud.com</span><br><span class="line">timeout = <span class="number">120</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装python3&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#安装python3&quot;&gt;&lt;/a&gt; 安装Python3&lt;/h1&gt;
&lt;figure class=&quot;highlight awk&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="Python" scheme="https://stingy-person.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://stingy-person.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>aiphoto环境搭建</title>
    <link href="https://stingy-person.github.io/2022/01/01/back-end/Python/aiphoto_build/"/>
    <id>https://stingy-person.github.io/2022/01/01/back-end/Python/aiphoto_build/</id>
    <published>2022-01-01T02:19:17.880Z</published>
    <updated>2022-06-19T15:17:06.494Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载aiphoto源代码"><a class="markdownIt-Anchor" href="#下载aiphoto源代码"></a> 下载aiphoto源代码</h1><p><a href="https://github.com/itainf/aiphoto">https://github.com/itainf/aiphoto</a><br /><a href="./aiphoto-master.zip">aiphoto-master.zip</a></p><p><a href="https://github.com/xuebinqin/U-2-Net">https://github.com/xuebinqin/U-2-Net</a><br /><a href="./U-2-Net-master.zip">U-2-Net-master.zip</a></p><p><a href="https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz">https://www.python.org/ftp/python/3.7.0/Python-3.7.0.tgz</a><br /><a href="./Python-3.7.0.tgz">Python-3.7.0.tgz</a></p><h1 id="安装前准备"><a class="markdownIt-Anchor" href="#安装前准备"></a> 安装前准备</h1><h2 id="安装python37"><a class="markdownIt-Anchor" href="#安装python37"></a> 安装python3.7</h2><blockquote><p>此处仅以centos举例</p></blockquote><ul><li>下载并编译安装python<br /><a href="source/_posts/server/Linux/linux_source_config.md">yum源配置</a></li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 准备编译安装目录</span></span><br><span class="line">mkdir <span class="regexp">/opt/</span></span><br><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载源码</span></span><br><span class="line">wget https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/3.7.0/</span>Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar xvf Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br><span class="line">cd <span class="regexp">/opt/</span>Python-<span class="number">3.7</span>.<span class="number">0</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 安装依赖，安装前请自行配置yum源</span></span><br><span class="line">yum -y install make automake gcc-c++ kernel-devel unzip gcc zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel anaconda python3-devel python-devel</span><br><span class="line">.<span class="regexp">/configure --prefix=/</span>opt/python3</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置pip库</span></span><br><span class="line">sed -i <span class="string">&#x27;s|^USER_SITE = None|USER_SITE = &quot;/opt/python3/lib/python3.7/site-packages&quot;|g&#x27;</span> <span class="regexp">/opt/</span>python3<span class="regexp">/lib/</span>python3.<span class="number">7</span>/site.py</span><br><span class="line">sed -i <span class="string">&#x27;s|^USER_BASE = None|USER_BASE = &quot;/opt/python3/&quot;|g&#x27;</span> <span class="regexp">/opt/</span>python3<span class="regexp">/lib/</span>python3.<span class="number">7</span>/site.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置执行命令</span></span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>python3.<span class="number">7</span> <span class="regexp">/usr/</span>bin/python3.<span class="number">7</span></span><br><span class="line">ln -s <span class="regexp">/opt/</span>python3<span class="regexp">/bin/</span>pip3.<span class="number">7</span> <span class="regexp">/usr/</span>bin/pip3.<span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查Python安装情况，如下图即为成功</span></span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3<span class="number">.7</span> -V</span><br></pre></td></tr></table></figure><p><img src="./001.jpg" alt="alt &quot;001&quot;" /></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.<span class="number">7</span> <span class="comment">--version</span></span><br></pre></td></tr></table></figure><p><img src="./002.jpg" alt="alt &quot;002&quot;" /></p><h2 id="pip源配置"><a class="markdownIt-Anchor" href="#pip源配置"></a> pip源配置</h2><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># pip源配置 自己视情况而定，此处配置是为了解决服务器下载pip模块慢的问题</span><br><span class="line">mkdir -p ~/.pip/</span><br><span class="line">touch ~/.pip/pip.conf</span><br><span class="line"></span><br><span class="line"># 大家注意使用前，手动访问下<span class="keyword">index</span>-url地址是否可以打开，自己挑选配置</span><br><span class="line"># 阿里云镜像源配置</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[golbal]</span><br><span class="line"><span class="keyword">index</span>-url = http://mirrors.aliyun.com/pypi/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = mirrors.aliyun.com</span><br><span class="line">timeout=<span class="number">6000</span></span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 华为云镜像源配置</span><br><span class="line">cat &gt; ~/.pip/pip.conf &lt;&lt; EOF</span><br><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="keyword">index</span>-url = https://repo.huaweicloud.com/repository/pypi/simple</span><br><span class="line"><span class="keyword">trusted</span>-host = repo.huaweicloud.com</span><br><span class="line">timeout = <span class="number">120</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h2 id="安装依赖包"><a class="markdownIt-Anchor" href="#安装依赖包"></a> 安装依赖包</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3.<span class="number">7</span> <span class="keyword">install </span>--upgrade pip</span><br><span class="line">pip3.<span class="number">7</span> <span class="keyword">install </span><span class="keyword">scikit-image </span>torch torchvision pymatting rembg cmake dlib</span><br></pre></td></tr></table></figure><h2 id="安装conda"><a class="markdownIt-Anchor" href="#安装conda"></a> 安装conda</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget -c https:<span class="regexp">//</span>repo.continuum.io<span class="regexp">/miniconda/</span>Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">bash Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">敲击回车后，输入q键，然后按照如下顺序执行</span><br><span class="line">输入yes,敲击回车后在敲击回车即可</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置命令</span></span><br><span class="line">ln -s ~<span class="regexp">/miniconda3/</span>bin<span class="regexp">/conda /u</span>sr<span class="regexp">/bin/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 源配置</span></span><br><span class="line">cat &gt; ~/.condarc &lt;&lt;EOF</span><br><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: true</span><br><span class="line">default_channels:</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/main</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/free</span><br><span class="line">  - https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>pkgs/r</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  msys2: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  bioconda: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  menpo: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  pytorch: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">  simpleitk: https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/anaconda/</span>cloud</span><br><span class="line">EOF</span><br><span class="line"><span class="comment"># 安装使用到模块</span></span><br><span class="line">conda install -y pytorch torchvision cudatoolkit=<span class="number">10.2</span> -c pytorch</span><br></pre></td></tr></table></figure><h2 id="安装u2net"><a class="markdownIt-Anchor" href="#安装u2net"></a> 安装u2net</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget https:<span class="regexp">//</span>codeload.github.com<span class="regexp">/xuebinqin/</span>U-<span class="number">2</span>-Net<span class="regexp">/zip/</span>refs<span class="regexp">/heads/m</span>aster</span><br><span class="line">unzip U-<span class="number">2</span>-Net-master.zip</span><br><span class="line">mv U-<span class="number">2</span>-Net-master u2net</span><br></pre></td></tr></table></figure><h1 id="搭建aiphoto"><a class="markdownIt-Anchor" href="#搭建aiphoto"></a> 搭建aiphoto</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/opt/</span></span><br><span class="line">wget https:<span class="regexp">//</span>codeload.github.com<span class="regexp">/itainf/</span>aiphoto<span class="regexp">/zip/</span>refs<span class="regexp">/heads/m</span>aster</span><br><span class="line">unzip aiphoto-master.zip</span><br><span class="line">mv aiphoto-master aiphoto</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;下载aiphoto源代码&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#下载aiphoto源代码&quot;&gt;&lt;/a&gt; 下载aiphoto源代码&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/itainf/aiphoto</summary>
      
    
    
    
    <category term="Python" scheme="https://stingy-person.github.io/categories/Python/"/>
    
    
    <category term="Python" scheme="https://stingy-person.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>VMware</title>
    <link href="https://stingy-person.github.io/2022/01/01/server/VMWare/vmware_util/"/>
    <id>https://stingy-person.github.io/2022/01/01/server/VMWare/vmware_util/</id>
    <published>2022-01-01T02:19:17.866Z</published>
    <updated>2022-06-19T15:17:06.290Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1centos镜像下载"><a class="markdownIt-Anchor" href="#1centos镜像下载"></a> 1.CentOS镜像下载</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Centos镜像下载地址</span><br><span class="line">- https://www.centos.org/download/</span><br><span class="line">- http://man.linuxde.net/download/CentOS</span><br><span class="line">- http://mirrors.btte.net/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.cn99.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.sohu.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.aliyun.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://centos.ustc.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.neusoft.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirror.lzu.edu.cn/centos/7/isos/x86_64/ </span><br><span class="line">- http://mirrors.163.com/centos/7/isos/x86_64/ </span><br><span class="line">- http://ftp.sjtu.edu.cn/centos/7/isos/x86_64/</span><br></pre></td></tr></table></figure><h1 id="2启动停止脚本"><a class="markdownIt-Anchor" href="#2启动停止脚本"></a> 2.启动停止脚本</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set &#x2F;p operator&#x3D;请输入VM操作指令 Y 启动, N 停止：</span><br><span class="line">echo %operator%</span><br><span class="line">if &quot;%operator%&quot; &#x3D;&#x3D; &quot;Y&quot; (</span><br><span class="line">  call goto start</span><br><span class="line">) else (</span><br><span class="line">  if &quot;%operator%&quot; &#x3D;&#x3D; &quot;N&quot; (</span><br><span class="line">    call goto stop</span><br><span class="line">  ) else (</span><br><span class="line">    echo 指令不正确</span><br><span class="line">goto failed</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:start</span><br><span class="line">  echo ############启动VMWare############</span><br><span class="line">  call net start VMAuthdService</span><br><span class="line">  call net start VMnetDHCP</span><br><span class="line">  call net start VMUSBArbService</span><br><span class="line">  call net start VMwareHostd</span><br><span class="line">  call net start &quot;VMware NAT Service&quot;</span><br><span class="line">  goto ok</span><br><span class="line"></span><br><span class="line">:stop</span><br><span class="line">  echo ##############停止VMWare##########</span><br><span class="line">  call net stop VMwareHostd</span><br><span class="line">  call net stop VMAuthdService</span><br><span class="line">  call net stop VMnetDHCP</span><br><span class="line">  call net stop &quot;VMware NAT Service&quot;</span><br><span class="line">  call net stop VMUSBArbService</span><br><span class="line">  goto ok</span><br><span class="line">:ok</span><br><span class="line">  echo ##################################</span><br><span class="line">  echo #        Execute Success         #</span><br><span class="line">  echo ##################################</span><br><span class="line">  call timeout &#x2F;T 10 &#x2F;NOBREAK</span><br><span class="line">  goto end</span><br><span class="line">:failed</span><br><span class="line">  echo ##################################</span><br><span class="line">  echo #        Execute FAILED         #</span><br><span class="line">  echo ##################################</span><br><span class="line">  call timeout &#x2F;T 5 &#x2F;NOBREAK</span><br><span class="line">  goto end</span><br><span class="line">:end</span><br></pre></td></tr></table></figure><p>将以上内容保存在本地(切记保存是一ANSI编码保存,防止出现乱码),存为.bat文件,以管理员身份运行</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1centos镜像下载&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1centos镜像下载&quot;&gt;&lt;/a&gt; 1.CentOS镜像下载&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td </summary>
      
    
    
    
    <category term="Other" scheme="https://stingy-person.github.io/categories/Other/"/>
    
    
    <category term="Windows" scheme="https://stingy-person.github.io/tags/Windows/"/>
    
    <category term="VMware" scheme="https://stingy-person.github.io/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>EMQ X Broker编译</title>
    <link href="https://stingy-person.github.io/2022/01/01/server/Linux/emqx_broker_compile/"/>
    <id>https://stingy-person.github.io/2022/01/01/server/Linux/emqx_broker_compile/</id>
    <published>2022-01-01T02:19:17.833Z</published>
    <updated>2021-07-22T15:23:32.147Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-拉取基础镜像"><a class="markdownIt-Anchor" href="#1-拉取基础镜像"></a> 1. 拉取基础镜像</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行基础镜像</span></span><br><span class="line">run_container_id=$(docker run -it -d --name=emqx --net=host $(docker images | grep centos | grep latest | awk &#x27;&#123;print $3&#125;&#x27;) tail -f /dev/null)</span><br><span class="line">docker cp /etc/yum.repos.d/CentOS-Base.repo $&#123;run_container_id&#125;:/etc/yum.repos.d/</span><br><span class="line">docker exec -it $&#123;run_container_id&#125; bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装依赖</span></span><br><span class="line">yum install -y git</span><br><span class="line">git config --global http.sslVerify false</span><br><span class="line">git config --global http.postBuffer 1024288000</span><br></pre></td></tr></table></figure><h1 id="2安装wxwidgets"><a class="markdownIt-Anchor" href="#2安装wxwidgets"></a> 2.安装wxWidgets</h1><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum -y install bzip2 gcc-c++ gcc glibc-devel make ncurses-devel xmlto perl gtk3 gtk3-devel gtk3-*</span><br><span class="line"><span class="comment"># 官网下载 https://www.wxwidgets.org/downloads/</span></span><br><span class="line"><span class="comment"># 拷贝到容器中</span></span><br><span class="line">docker cp <span class="string">/root/wxWidgets-3.1.5.tar.bz2</span> $&#123;run_container_id&#125;:<span class="string">/opt/</span></span><br><span class="line">tar -jxvf wxWidgets-3.1.5.tar.bz2</span><br><span class="line"><span class="keyword">cd</span> wxWidgets-3.1.5</span><br><span class="line"><span class="string">./configure</span> <span class="params">--with-gtk=3</span> <span class="params">--without-libjpeg</span> <span class="params">--without-libtiff</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment"># 检查安装</span></span><br><span class="line">wx-config <span class="params">--version</span></span><br></pre></td></tr></table></figure><h1 id="3安装erlang"><a class="markdownIt-Anchor" href="#3安装erlang"></a> 3.安装erlang</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /opt/</span><br><span class="line">wget http://erlang.org/download/otp_src_22.1.tar.gz</span><br><span class="line">tar xvf otp_src_22.1.tar.gz</span><br><span class="line">cd otp_src_22.1</span><br><span class="line">yum install -y gcc glibc-devel make ncurses-devel openssl-devel autoconf</span><br><span class="line">yum install -y unixODBC unixODBC-devel</span><br><span class="line">./configure --prefix=/usr/local/erlang</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -sf /usr/local/erlang/bin/erl /usr/local/bin/</span><br><span class="line">export PATH=$PATH:/usr/local/erlang/bin/</span><br></pre></td></tr></table></figure><h1 id="4编译emq-x-broker"><a class="markdownIt-Anchor" href="#4编译emq-x-broker"></a> 4.编译EMQ X Broker</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 下载软件包</span><br><span class="line"><span class="built_in">mkdir</span> /<span class="keyword">opt</span></span><br><span class="line"><span class="keyword">cd</span> /<span class="keyword">opt</span>/</span><br><span class="line">git clone -<span class="keyword">b</span> v4.<span class="number">3.5</span> http<span class="variable">s:</span>//github.<span class="keyword">com</span>/emqx/emqx.git</span><br><span class="line"><span class="keyword">cd</span> emqx</span><br><span class="line"><span class="keyword">make</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-拉取基础镜像&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-拉取基础镜像&quot;&gt;&lt;/a&gt; 1. 拉取基础镜像&lt;/h1&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gu</summary>
      
    
    
    
    <category term="Linux" scheme="https://stingy-person.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://stingy-person.github.io/tags/Linux/"/>
    
    <category term="Minio" scheme="https://stingy-person.github.io/tags/Minio/"/>
    
  </entry>
  
  <entry>
    <title>Centos Minio版配置</title>
    <link href="https://stingy-person.github.io/2022/01/01/server/Linux/centos_minio/"/>
    <id>https://stingy-person.github.io/2022/01/01/server/Linux/centos_minio/</id>
    <published>2022-01-01T02:19:17.829Z</published>
    <updated>2021-07-22T11:55:11.850Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-源配置"><a class="markdownIt-Anchor" href="#1-源配置"></a> 1. 源配置</h1><ul><li>ali源配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">sed -i -e &#x27;/mirrors.cloud.aliyuncs.com/d&#x27; -e &#x27;/mirrors.aliyuncs.com/d&#x27; /etc/yum.repos.d/CentOS-Base.repo</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><ul><li>华为源配置</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rm -rf <span class="regexp">/etc/yum</span>.repos.d/*</span><br><span class="line">wget -O <span class="regexp">/etc/yum</span>.repos.d<span class="regexp">/CentOS-Base.repo https:/</span><span class="regexp">/repo.huaweicloud.com/</span>repository<span class="regexp">/conf/</span>CentOS-<span class="number">7</span>-reg.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure><h1 id="99faq"><a class="markdownIt-Anchor" href="#99faq"></a> 99.FAQ</h1><h2 id="配置访问外网"><a class="markdownIt-Anchor" href="#配置访问外网"></a> 配置访问外网</h2><p>echo “nameserver 114.114.114.114” &gt;&gt;/etc/resolv.conf</p><h2 id="忘记密码"><a class="markdownIt-Anchor" href="#忘记密码"></a> 忘记密码</h2><p><a href="https://www.cnblogs.com/molson/p/13493847.html">https://www.cnblogs.com/molson/p/13493847.html</a></p><h2 id="分配ip"><a class="markdownIt-Anchor" href="#分配ip"></a> 分配IP</h2><p><a href="https://blog.csdn.net/qq_42247220/article/details/85834418">https://blog.csdn.net/qq_42247220/article/details/85834418</a></p><h2 id="常用命令"><a class="markdownIt-Anchor" href="#常用命令"></a> 常用命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget</span><br><span class="line">yum install -y net-tools</span><br></pre></td></tr></table></figure><h2 id="删除rpm包并删除依赖"><a class="markdownIt-Anchor" href="#删除rpm包并删除依赖"></a> 删除rpm包（并删除依赖）</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum history list docker-ce</span><br></pre></td></tr></table></figure><p><img src="./001.png" alt="alt &quot;001&quot;" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum history undo 5</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;1-源配置&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#1-源配置&quot;&gt;&lt;/a&gt; 1. 源配置&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;ali源配置&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table</summary>
      
    
    
    
    <category term="Linux" scheme="https://stingy-person.github.io/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://stingy-person.github.io/tags/Linux/"/>
    
    <category term="Minio" scheme="https://stingy-person.github.io/tags/Minio/"/>
    
  </entry>
  
  <entry>
    <title>Redis编译及镜像制作</title>
    <link href="https://stingy-person.github.io/2022/01/01/containerized/Docker/build_reids_image/"/>
    <id>https://stingy-person.github.io/2022/01/01/containerized/Docker/build_reids_image/</id>
    <published>2022-01-01T02:19:17.776Z</published>
    <updated>2021-06-27T09:39:47.582Z</updated>
    
    <content type="html"><![CDATA[<h1 id="制作背景"><a class="markdownIt-Anchor" href="#制作背景"></a> 制作背景</h1><blockquote><p>docker hub中默认下载的镜像运行目录比较分散，为方便统一管理，因此自己制作镜像。<br />此处记录下相关制作步骤。</p></blockquote><h1 id="配置镜像源"><a class="markdownIt-Anchor" href="#配置镜像源"></a> 配置镜像源</h1><p><a href="https://mirrors.huaweicloud.com/">华为云镜像源配置</a></p><h1 id="安装docker"><a class="markdownIt-Anchor" href="#安装docker"></a> 安装Docker</h1><blockquote><p><a href="https://www.runoob.com/docker/centos-docker-install.html">参考资料</a></p></blockquote><h1 id="编译redis"><a class="markdownIt-Anchor" href="#编译redis"></a> 编译Redis</h1><h2 id="命令如下"><a class="markdownIt-Anchor" href="#命令如下"></a> 命令如下</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">yum install -y wget make gcc gcc-c++ libstdc++-devel net-tools</span><br><span class="line">mkdir -p /opt/redis</span><br><span class="line">cd /opt/</span><br><span class="line">wget -O redis-6.2.3.tar.gz https://download.redis.io/releases/redis-6.2.3.tar.gz?_ga=2.28225850.76180306.1622212345-587279226.1622212345</span><br><span class="line">tar xvf redis-6.2.3.tar.gz</span><br><span class="line">rm -rf redis-6.2.3.tar.gz</span><br><span class="line">cd /opt/redis-6.2.3/</span><br><span class="line">sed -i &#x27;s|^PREFIX?=/usr/local|PREFIX?=/opt/redis/|g&#x27; /opt/redis-6.2.3/src/Makefile</span><br><span class="line">make distclean &amp;&amp; make </span><br><span class="line">make install</span><br><span class="line">cp -r /opt/redis-6.2.3/redis.conf /opt/redis/</span><br><span class="line">tar zcvf redis-6.2.3.tar.gz redis</span><br><span class="line"><span class="meta">#</span><span class="bash"> redis-6.2.3.tar.gz即为可直接用于安装的软件包</span></span><br></pre></td></tr></table></figure><h1 id="制作镜像"><a class="markdownIt-Anchor" href="#制作镜像"></a> 制作镜像</h1><h2 id="拉取基础镜像"><a class="markdownIt-Anchor" href="#拉取基础镜像"></a> 拉取基础镜像</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure><h2 id="制作redis镜像"><a class="markdownIt-Anchor" href="#制作redis镜像"></a> 制作redis镜像</h2><blockquote><p>废话不多说，直接上脚本</p></blockquote><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">mkdir -p /opt/redis/data</span><br><span class="line">cd /opt/redis</span><br><span class="line"><span class="meta">#</span><span class="bash"> 手动将4.1章节编译的redis软件包拷贝/opt/redis目录下</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加容器内启动脚本</span></span><br><span class="line">cat &gt; /opt/redis/run.sh &lt;&lt;EOF</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">export PATH=\$PATH:/opt/redis/bin</span><br><span class="line"></span><br><span class="line">mkdir -p /opt/redis/data/logs</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">修改redis配置</span></span><br><span class="line">sed -i &quot;s|^bind 127.0.0.1|#bind 127.0.0.1|g&quot; /opt/redis/redis.conf</span><br><span class="line">sed -i &quot;s|^# requirepass foobared|requirepass monkey123456|g&quot; /opt/redis/redis.conf</span><br><span class="line">sed -i &quot;s|^logfile \&quot;\&quot;|logfile /opt/redis/data/logs/redis.log|g&quot; /opt/redis/redis.conf</span><br><span class="line">sed -i &quot;s|^dir ./|dir /opt/redis/data/|g&quot; /opt/redis/redis.conf</span><br><span class="line"></span><br><span class="line">nohup /opt/redis/bin/redis-server /opt/redis/redis.conf &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">  sleep 66666</span><br><span class="line">done</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加Dockerfile</span></span><br><span class="line">cat &gt; /opt/redis/Dockerfile &lt;&lt;EOF</span><br><span class="line">FROM centos:latest</span><br><span class="line">MAINTAINER huifeidechengxuhou 905280842@qq.com</span><br><span class="line">ADD redis-6.2.3.tar.gz /opt/</span><br><span class="line">COPY run.sh /opt/</span><br><span class="line">RUN chmod +x /opt/run.sh</span><br><span class="line">WORKDIR /opt/</span><br><span class="line">ENTRYPOINT [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;/opt/run.sh&quot;]</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 制作镜像</span></span><br><span class="line">docker build -t monkey-redis:1.0.0 .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行镜像</span></span><br><span class="line">docker run -it -d --name=monkey-redis -p 10005:6379 -v /opt/redis/data:/opt/redis/data monkey-redis:1.0.0 bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入容器</span></span><br><span class="line">docker exec -it $(docker ps -a | grep monkey-redis | awk &#x27;&#123;print $1&#125;&#x27;) bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器内登录数据库</span></span><br><span class="line">/opt/redis/bin/redis-cli</span><br></pre></td></tr></table></figure><ul><li>数据库访问截图<br /><img src="./%E5%9B%BE1.jpg" alt="图1" /></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;制作背景&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#制作背景&quot;&gt;&lt;/a&gt; 制作背景&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;docker hub中默认下载的镜像运行目录比较分散，为方便统一管理，因此自己制作镜像。&lt;br /&gt;
此处</summary>
      
    
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>MySQL镜像制作</title>
    <link href="https://stingy-person.github.io/2022/01/01/containerized/Docker/build_mysql_image/"/>
    <id>https://stingy-person.github.io/2022/01/01/containerized/Docker/build_mysql_image/</id>
    <published>2022-01-01T02:19:17.772Z</published>
    <updated>2022-05-15T13:27:13.741Z</updated>
    
    <content type="html"><![CDATA[<h1 id="制作背景"><a class="markdownIt-Anchor" href="#制作背景"></a> 制作背景</h1><blockquote><p>docker hub中默认下载的镜像运行目录比较分散，为方便统一管理，因此自己制作镜像。<br />此处记录下相关制作步骤。</p></blockquote><h1 id="配置镜像源"><a class="markdownIt-Anchor" href="#配置镜像源"></a> 配置镜像源</h1><p><a href="https://mirrors.huaweicloud.com/">华为云镜像源配置</a></p><h1 id="安装docker"><a class="markdownIt-Anchor" href="#安装docker"></a> 安装Docker</h1><blockquote><p><a href="https://www.runoob.com/docker/centos-docker-install.html">参考资料</a></p></blockquote><h1 id="制作镜像"><a class="markdownIt-Anchor" href="#制作镜像"></a> 制作镜像</h1><h2 id="拉取基础镜像"><a class="markdownIt-Anchor" href="#拉取基础镜像"></a> 拉取基础镜像</h2><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure><h2 id="制作镜像脚本"><a class="markdownIt-Anchor" href="#制作镜像脚本"></a> 制作镜像脚本</h2><blockquote><p>废话不多说，直接上脚本</p></blockquote><figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">mkdir -p /opt/mysql</span><br><span class="line">cd /opt/mysql</span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过wget下载软件包</span></span><br><span class="line">wget https://cdn.mysql.com/archives/mysql-8.0/mysql-8.0.24-linux-glibc2.12-x86_64.tar.xz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压软件包</span></span><br><span class="line">tar xvf mysql-*</span><br><span class="line">rm -rf mysql-*.tar.xz</span><br><span class="line">mv $(ls | grep mysql | awk &#x27;&#123;print $1&#125;&#x27;) mysql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加配置文件</span></span><br><span class="line">cat &gt; /opt/mysql/mysql/my.cnf &lt;&lt; EOF</span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8mb4</span><br><span class="line">port=3306</span><br><span class="line">socket=/opt/mysql/log/mysql_client_3306.sock</span><br><span class="line">ssl-ca=/opt/mysql/data/ca.pem</span><br><span class="line">ssl-cert=/opt/mysql/data/server-cert.pem</span><br><span class="line">ssl-key=/opt/mysql/data/server-key.pem</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The MySQL server</span></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8mb4</span><br><span class="line">port=3306</span><br><span class="line">socket=/opt/mysql/log/mysql_mysqld_3306.sock</span><br><span class="line">skip-external-locking</span><br><span class="line">basedir=/opt/mysql</span><br><span class="line">datadir=/opt/mysql/data</span><br><span class="line">log-error=/opt/mysql/log/mysql_error.log</span><br><span class="line">pid-file=/opt/mysql/log/mysql.pid</span><br><span class="line">key_buffer_size=16M</span><br><span class="line">max_allowed_packet=1M</span><br><span class="line">table_open_cache=64</span><br><span class="line">explicit_defaults_for_timestamp=on</span><br><span class="line">lower-case-table-names=1</span><br><span class="line"><span class="meta">#</span><span class="bash">ssl setting</span></span><br><span class="line">ssl-ca=/opt/mysql/data/ca.pem</span><br><span class="line">ssl-cert=/opt/mysql/data/server-cert.pem</span><br><span class="line">ssl-key=/opt/mysql/data/server-key.pem</span><br><span class="line"><span class="meta">#</span><span class="bash"> 允许最大连接数</span></span><br><span class="line">max_connections=200</span><br><span class="line"><span class="meta">#</span><span class="bash"> 允许连接失败的次数。</span></span><br><span class="line">max_connect_errors=10</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加容器内启动脚本</span></span><br><span class="line">cat &gt; /opt/mysql/run.sh &lt;&lt;EOF</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">export PATH=\$PATH:/opt/mysql/bin:/opt/mysql/support-files</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加用户和用户组</span></span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql mysql</span><br><span class="line">mkdir -p /opt/mysql/log/</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改mysql目录权限</span></span><br><span class="line">chown mysql:mysql -R /opt/mysql</span><br><span class="line"></span><br><span class="line">yum install -y libaio-devel.x86_64 numactl net-tools</span><br><span class="line">su mysql &lt;&lt;END</span><br><span class="line">if [ \$(ls /opt/mysql/data/ | wc -l) == 0 ];then</span><br><span class="line">/opt/mysql/bin/mysqld --initialize --user=mysql --basedir=/opt/mysql/ --datadir=/opt/mysql/data --lower-case-table-names=1 &gt; /opt/mysql/log/init.log 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s|^basedir=|basedir=/opt/mysql/|g&#x27; /opt/mysql/support-files/mysql.server</span><br><span class="line">sed -i &#x27;s|^datadir=|datadir=/opt/mysql/data/|g&#x27; /opt/mysql/support-files/mysql.server</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ \$(netstat -anp | grep 3306 | grep LISTEN | wc -l) == 0];then</span><br><span class="line">/opt/mysql/support-files/mysql.server start</span><br><span class="line">else</span><br><span class="line">/opt/mysql/support-files/mysql.server restart</span><br><span class="line">fi</span><br><span class="line">END</span><br><span class="line">ln -s /usr/lib64/libtinfo.so.6.1 /usr/lib64/libtinfo.so.5</span><br><span class="line">cat &gt; /opt/mysql/init.sql &lt;&lt;STOP</span><br><span class="line">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;monkey123456&#x27;;</span><br><span class="line">use mysql;</span><br><span class="line">update user set host = &#x27;%&#x27; where user = &#x27;root&#x27; and host=&#x27;localhost&#x27;;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;monkey123456&#x27;;</span><br><span class="line">GRANT ALL ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; ;</span><br><span class="line">flush privileges;</span><br><span class="line">STOP</span><br><span class="line">password=\$(cat /opt/mysql/log/init.log | grep password | awk -F &#x27;localhost: &#x27; &#x27;&#123;print \$2&#125;&#x27;)</span><br><span class="line">mysql -h127.0.0.1 -uroot -p\$&#123;password&#125; -e &quot;source /opt/mysql/init.sql;&quot; --connect-expired-password</span><br><span class="line">rm -rf /opt/mysql/init.sql</span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">  sleep 66666</span><br><span class="line">done</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在宿主机创建创建数据目录，用于挂载</span></span><br><span class="line">mkdir -p /opt/mysql/data</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加Dockerfile</span></span><br><span class="line">cat &gt; /opt/mysql/Dockerfile &lt;&lt;EOF</span><br><span class="line">FROM centos:latest</span><br><span class="line">MAINTAINER huifeidechengxuhou 905280842@qq.com</span><br><span class="line">COPY mysql /opt/mysql</span><br><span class="line">COPY run.sh /opt/</span><br><span class="line">RUN chmod +x /opt/run.sh</span><br><span class="line">WORKDIR /opt/</span><br><span class="line">ENTRYPOINT [&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;/opt/run.sh&quot;]</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 制作镜像</span></span><br><span class="line">docker build -t monkey-mysql:1.0.0 .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行镜像</span></span><br><span class="line">docker run -it -d --name=monkey-mysql -p 3306:3306 -v /opt/mysql/data:/opt/mysql/data monkey-mysql:1.0.0 bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入容器</span></span><br><span class="line">docker exec -it $(docker ps -a | grep monkey-mysql | awk &#x27;&#123;print $1&#125;&#x27;) bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 容器内登录数据库</span></span><br><span class="line">mysql -uroot -h127.0.0.1 -pmonkey123456</span><br></pre></td></tr></table></figure><ul><li><p>制作镜像截图<br /><img src="./%E5%9B%BE1.jpg" alt="图1" /></p></li><li><p>运行镜像截图<br /><img src="./%E5%9B%BE2.jpg" alt="图2" /></p></li><li><p>访问数据截图<br /><img src="./%E5%9B%BE3.jpg" alt="图3" /></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;制作背景&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#制作背景&quot;&gt;&lt;/a&gt; 制作背景&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;docker hub中默认下载的镜像运行目录比较分散，为方便统一管理，因此自己制作镜像。&lt;br /&gt;
此处</summary>
      
    
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://stingy-person.github.io/tags/Docker/"/>
    
  </entry>
  
</feed>
